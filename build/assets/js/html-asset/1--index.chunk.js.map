{"version":3,"file":"assets/js/html-asset/1--index.chunk.js","sources":["webpack:///./src/index.js"],"sourcesContent":["const { createWorker } = require('@ffmpeg/ffmpeg')\n\nconst readFile = async file =>\n\tnew Uint8Array(await new Response(file).arrayBuffer())\n\nconst download = (url, name = 'file') => {\n\tconst a = document.createElement('a')\n\ta.href = url\n\ta.download = name\n\tdocument.body.appendChild(a)\n\ta.click()\n\tdocument.body.removeChild(a)\n}\n\nconst $ = s => document.querySelector(s)\nconst $video = $('.video')\n$video.addEventListener('drop', e => {\n\te.preventDefault()\n\t$('#video').files = e.dataTransfer.files\n})\n$video.addEventListener('dragover', e => {\n\te.preventDefault()\n})\nconst $audio = $('.audio')\n$audio.addEventListener('drop', e => {\n\te.preventDefault()\n\t$('#audio').files = e.dataTransfer.files\n})\n$audio.addEventListener('dragover', e => {\n\te.preventDefault()\n})\n\nconst worker = createWorker()\nworker.load()\nconst ext = name => name.split('.').pop()\nconst $form = $('.form')\n$form.addEventListener('submit', async e => {\n\te.preventDefault()\n\tconst video = $('#video').files[0]\n\tconst audio = $('#audio').files[0]\n\tif (!video || !audio) {\n\t\talert('Either video or audio does not exist.')\n\t\treturn\n\t}\n\tconst vidname = 'video.' + ext(video.name.split('.').pop())\n\tconst audname = 'audio.' + ext(audio.name.split('.').pop())\n\tconst outext = ext(video.name)\n\tawait worker.write(vidname, await readFile(video))\n\tawait worker.write(audname, await readFile(audio))\n\tawait worker.run(\n\t\t`-i /data/${vidname} -i /data/${audname} -c copy output.${outext}`,\n\t\t{\n\t\t\tinput: [vidname, audname],\n\t\t\toutput: 'output.' + outext\n\t\t}\n\t)\n\tconst { data } = await worker.read('output.' + outext)\n\tconst url = URL.createObjectURL(new Blob([data]))\n\tdownload(url, $('.form>input[name=filename]').value)\n})\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AACA;AAIA;AALA;AACA;AADA;AAQA;AACA;AACA;AAVA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAgBA;AACA;AAFA;AACA;AAhBA;AAAA;AAAA;AACA;AADA;AAAA;AAoBA;AACA;AACA;AACA;AAvBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}